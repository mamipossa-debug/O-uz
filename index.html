<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SÃ¼rpriz ğŸ â€” Mutlu YÄ±llar</title>
  <style>
    :root{
      --bg1: #071026;
      --bg2: #031220;
      --card-bg: rgba(255,255,255,0.03);
      --accent:#ff5d7a;
      --accent-2:#ffd166;
      --muted:#cbd5e1cc;
      --glass: rgba(255,255,255,0.02);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family:Inter,system-ui,Segoe UI,Arial;
      background:
        radial-gradient(circle at 10% 10%, rgba(255,93,122,0.06), transparent 8%),
        linear-gradient(180deg,var(--bg1) 0%, #07132a 40%, var(--bg2) 100%);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }

    /* canvas layer for all animated background elements */
    #effects-layer { position:fixed; inset:0; z-index:0; pointer-events:none; }

    /* Big background heart (made more visible/pulsing) */
    .bg-heart{
      position:fixed;
      left:50%;
      top:34%;
      transform:translate(-50%,-50%) scale(1);
      width:1100px;height:1100px;opacity:0.085;z-index:0;filter:blur(14px);pointer-events:none;
      animation: bgPulse 6000ms infinite ease-in-out;
    }
    @keyframes bgPulse{
      0%{transform:translate(-50%,-50%) scale(0.98); opacity:0.06}
      50%{transform:translate(-50%,-50%) scale(1.04); opacity:0.11}
      100%{transform:translate(-50%,-50%) scale(0.98); opacity:0.06}
    }

    /* subtle floating hearts layer (behind card, above canvas) */
    .floating-hearts-layer{ position:fixed; inset:0; z-index:1; pointer-events:none; overflow:visible; }

    .floating-bg-heart{
      position:fixed;
      pointer-events:none;
      z-index:1;
      font-size:18px;
      transform-origin:center;
      will-change:transform,opacity;
      user-select:none;
      text-shadow: 0 2px 6px rgba(0,0,0,0.35);
      color: rgba(255,93,122,0.95);
      opacity:0;
    }
    @keyframes riseHeart {
      0% { transform: translateY(0) scale(0.85) rotate(0deg); opacity:0; }
      8% { opacity:1; }
      100% { transform: translateY(-260px) scale(1.12) rotate(18deg); opacity:0; }
    }

    /* String lights: container above canvas but behind card */
    .string-lights{
      position:fixed;left:0;right:0;top:6px;height:70px;pointer-events:none;z-index:0;display:flex;justify-content:center;align-items:flex-start;
    }
    .lights-row{
      position:relative;width:92vw;max-width:880px;height:40px;transform:translateY(-8px);
    }
    .bulb{
      position:absolute;top:8px;width:14px;height:18px;border-radius:6px;
      box-shadow:0 6px 18px rgba(0,0,0,0.35), 0 0 10px currentColor;
      transform-origin:center;opacity:0.95;filter: drop-shadow(0 2px 6px rgba(0,0,0,0.25));
      animation: glow 1600ms infinite ease-in-out;
    }
    .bulb::after{ content:''; position:absolute; left:50%; top:4px; width:6px; height:6px; border-radius:50%; transform:translateX(-50%); background:rgba(255,255,255,0.8); opacity:0.65 }
    @keyframes glow{ 0%{transform:scale(.96)} 50%{transform:scale(1.06); opacity:1} 100%{transform:scale(.96)} }

    /* card */
    .card{
      width:92vw;max-width:880px;padding:28px;border-radius:20px;
      background:linear-gradient(180deg,var(--card-bg),rgba(255,255,255,0.01));
      box-shadow:0 20px 60px rgba(2,6,23,0.6);
      text-align:center;position:relative;z-index:2;backdrop-filter: blur(6px) saturate(120%);
      transition:transform .12s ease;
      will-change:transform;
    }
    .year-badge{position:absolute;right:18px;top:18px;background:linear-gradient(90deg,var(--accent),#ff2a6b);padding:8px 12px;border-radius:999px;font-weight:700;box-shadow:0 6px 18px rgba(255,93,122,0.16);color:white;font-size:.95rem}
    h1{margin:8px 0 6px;font-size:2.2rem;letter-spacing:.4px}
    p.lead{margin:0 0 16px;color:var(--muted);font-size:1.05rem}

    /* heart + button */
    .heart{width:120px;height:120px;margin:8px auto 6px;position:relative;transform:scale(1);transition:transform .25s ease}
    .heart:before,.heart:after{content:"";position:absolute;left:40px;top:0;width:50px;height:80px;background:linear-gradient(180deg,var(--accent),#ff2a6b);border-radius:50px 50px 0 0;transform-origin:bottom center}
    .heart:after{left:0;transform:rotate(-45deg)} .heart:before{left:40px;transform:rotate(45deg)}

    button{background:linear-gradient(90deg,var(--accent),#ff2a6b);border:0;padding:12px 20px;border-radius:12px;color:white;font-weight:700;font-size:1rem;cursor:pointer;box-shadow:0 10px 30px rgba(255,93,122,0.14);transition:transform .18s}
    button:active{transform:translateY(2px)}

    .secret{margin-top:18px;padding:18px;border-radius:14px;background:linear-gradient(180deg, var(--glass), rgba(255,255,255,0.01));display:none;text-align:left;color:var(--muted);line-height:1.6;max-height:60vh;overflow:auto}
    .secret.show{display:block}
    .secret .message{color:#fff;font-size:1.02rem;white-space:pre-wrap;min-height:4.2rem}

    footer{margin-top:12px;color:#9ca3af;font-size:0.86rem}

    /* ornaments (dom) */
    .ornament{
      position:fixed;pointer-events:none;z-index:0;border-radius:999px;opacity:.95;box-shadow:0 8px 28px rgba(0,0,0,0.35);mix-blend-mode:screen;
      transform-origin:center;will-change:transform,opacity;
      transition:transform .25s linear;
    }

    /* responsive tweaks */
    @media(max-width:520px){
      h1{font-size:1.6rem}
      .heart{width:86px;height:86px}
      .card{padding:18px}
      .lights-row{width:96vw}
    }
  </style>
</head>
<body>
  <!-- decorative blurred heart -->
  <svg class="bg-heart" viewBox="0 0 32 29.6" aria-hidden="true">
    <defs>
      <linearGradient id="g1" x1="0" x2="1">
        <stop offset="0" stop-color="#ff5d7a"/>
        <stop offset="1" stop-color="#ffd166"/>
      </linearGradient>
    </defs>
    <path fill="url(#g1)" d="M23.6,0c-2.7,0-5,1.5-6.6,3.9C15.4,1.5,13.1,0,10.4,0C4.7,0,0,4.7,0,10.4
      C0,18.9,16,29.6,16,29.6s16-10.7,16-19.2C32,4.7,27.3,0,23.6,0z"/>
  </svg>

  <!-- floating hearts layer (behind card, above canvas) -->
  <div class="floating-hearts-layer" aria-hidden="true" id="heartsLayer"></div>

  <!-- string lights -->
  <div class="string-lights" aria-hidden="true">
    <div id="lightsRow" class="lights-row"></div>
  </div>

  <!-- canvas for twinkles, snow, fireworks -->
  <canvas id="effects-layer" aria-hidden="true"></canvas>

  <!-- ornaments (DOM) will be injected -->
  <div id="ornaments-root" aria-hidden="true"></div>

  <div class="card" role="main" aria-label="SÃ¼rpriz kutusu" id="mainCard">
    <div class="year-badge" id="yearBadge" aria-hidden="true">2026</div>

    <h1>Mutlu YÄ±llar</h1>
    <p class="lead">Birlikte daha nice gÃ¼zel sayfalar aÃ§alÄ±m â€” bugÃ¼n kÃ¼Ã§Ã¼k bir sÃ¼rpriz var.</p>

    <div class="heart" aria-hidden="true"></div>

    <button id="toggleSecret" aria-expanded="false" aria-controls="secretArea">SÃ¼rprizi AÃ§</button>

    <div id="secretArea" class="secret" role="region" aria-label="Gizli mesaj">
      <div class="message">
Seninle bir yÄ±l deÄŸil bir Ã¶mÃ¼r
Yeni bir yÄ±l yeni bir sayfa aÃ§Ä±lÄ±yo Ã¶nÃ¼mÃ¼zde, bembeyaz. Bu sayfanÄ±n her satÄ±rÄ±nÄ±
seninle mutluluÄŸumuzla, yaÅŸadÄ±klarÄ±mÄ±zla, aÅŸkÄ±mÄ±zla doldurmak istiyorum. Sen benim
sadece sevgilim deÄŸil en gÃ¼venli yerim, huzur kaynaÄŸÄ±m bu dÃ¼nya anlam yÃ¼kleyen
birisin. Her geÃ§en yÄ±l seni bana daha Ã§ok baÄŸlÄ±yor, anÄ±larÄ±mÄ±z artÄ±yor ve vazgeÃ§ilmez
kÄ±lÄ±yor. her yÄ±l olduÄŸu gibi bul yÄ±lda hep seninleyim bir adÄ±m arkanda her anÄ±nda
yanÄ±ndaâ¤ï¸
      </div>
    </div>

    <footer>Sevgilerle â€” Senin</footer>
  </div>

  <script>
    // Robust feature detection
    const canvas = document.getElementById('effects-layer');
    const ctx = canvas && canvas.getContext ? canvas.getContext('2d') : null;
    const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    const prefersReducedMotion = matchMedia && matchMedia('(prefers-reduced-motion: reduce)').matches;

    // device-aware counts
    const DPR = () => window.devicePixelRatio || 1;
    function fitCanvas(){
      const dpr = DPR();
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      if(ctx && ctx.setTransform) ctx.setTransform(dpr,0,0,dpr,0,0);
    }

    // build string lights bulbs
    (function buildLights(){
      const row = document.getElementById('lightsRow');
      if(!row) return;
      const bulbs = 14;
      const colors = ['#ffd166','#ff5d7a','#ff8aa3','#ffd1a9','#fff3a6'];
      for(let i=0;i<bulbs;i++){
        const b = document.createElement('div');
        b.className = 'bulb';
        b.style.background = colors[i % colors.length];
        const left = (i/(bulbs-1))*100;
        b.style.left = `calc(${left}% - 8px)`;
        b.style.animationDelay = `${(i%5)*140}ms`;
        row.appendChild(b);
      }
    })();

    // ornaments (dom) for subtle floating shapes
    (function initOrnaments(){
      const root = document.getElementById('ornaments-root');
      if(!root) return;
      const count = Math.min(8, Math.max(4, Math.floor(window.innerWidth / 260)));
      const palette = ['rgba(255,93,122,0.12)','rgba(255,209,102,0.10)','rgba(144,206,244,0.08)','rgba(110,231,183,0.08)'];
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'ornament';
        const size = 60 + Math.random()*80;
        el.style.width = size + 'px';
        el.style.height = size + 'px';
        el.style.left = (10 + Math.random()*80) + '%';
        el.style.top = (15 + Math.random()*60) + '%';
        el.style.background = palette[i % palette.length];
        el.style.transform = `translate3d(0,0,0) scale(${0.9 + Math.random()*0.3})`;
        el.style.opacity = `${0.45 + Math.random()*0.4}`;
        el.dataset.baseX = parseFloat(el.style.left);
        el.dataset.baseY = parseFloat(el.style.top);
        root.appendChild(el);
      }
    })();

    // particles: snow, twinkles, fireworks
    let snow = [], twinkles = [], fireworks = [];
    function initParticles(){
      const w = window.innerWidth;
      const isMobile = w < 600 || isTouch;
      const snowCount = isMobile ? 60 : 120;
      const twinkleCount = isMobile ? 18 : 36;

      snow = [];
      for(let i=0;i<snowCount;i++){
        snow.push({
          x: Math.random()*w,
          y: Math.random()*window.innerHeight,
          r: Math.random()*2.6 + 0.6,
          vy: Math.random()*0.7 + 0.15,
          vx: (Math.random()-0.5)*0.6,
          osc: Math.random()*Math.PI*2,
          oSpeed: (Math.random()*0.02)+0.004,
          a: Math.random()*0.6 + 0.2
        });
      }

      twinkles = [];
      for(let i=0;i<twinkleCount;i++){
        twinkles.push({
          x: Math.random()*w,
          y: Math.random()*window.innerHeight*0.55,
          baseR: Math.random()*1.8 + 0.6,
          amp: Math.random()*0.7 + 0.2,
          speed: Math.random()*0.006 + 0.002,
          phase: Math.random()*Math.PI*2,
          hue: 30 + Math.random()*320
        });
      }
    }

    // firework spawn
    function spawnFirework(x, y, count=28){
      const colors = ['#ff5d7a','#ffd166','#90cdf4','#6ee7b7','#f093ff','#ffb1e6'];
      for(let i=0;i<count;i++){
        const ang = Math.random()*Math.PI*2;
        const speed = Math.random()*4 + 1.4;
        fireworks.push({
          x,y,
          vx: Math.cos(ang)*speed,
          vy: Math.sin(ang)*speed,
          life: 60 + Math.random()*50,
          size: Math.random()*2.2 + 0.8,
          color: colors[Math.floor(Math.random()*colors.length)]
        });
      }
    }

    // animate background scene
    let lastT = performance.now();
    let lastFirework = 0;
    function animateScene(t){
      if(!ctx) { requestAnimationFrame(animateScene); return; }
      const dt = Math.min(40, t - lastT);
      lastT = t;
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // draw twinkles (soft radial lights)
      for(const tw of twinkles){
        tw.phase += tw.speed * dt;
        const a = 0.28 + Math.sin(tw.phase)*tw.amp*0.4;
        const grd = ctx.createRadialGradient(tw.x, tw.y, 0, tw.x, tw.y, tw.baseR*6);
        grd.addColorStop(0, `hsla(${tw.hue},85%,85%,${a})`);
        grd.addColorStop(1, `hsla(${tw.hue},85%,65%,0)`);
        ctx.fillStyle = grd;
        ctx.fillRect(tw.x - tw.baseR*6, tw.y - tw.baseR*6, tw.baseR*12, tw.baseR*12);
      }

      // snow
      const w = window.innerWidth, h = window.innerHeight;
      for(const p of snow){
        p.y += p.vy * (dt/16);
        p.x += p.vx * (dt/16) + Math.sin(p.osc) * 0.3;
        p.osc += p.oSpeed * (dt/16);
        if(p.y > h + 10){ p.y = -10; p.x = Math.random()*w; }
        if(p.x > w + 10) p.x = -10;
        if(p.x < -10) p.x = w + 10;
        ctx.globalAlpha = p.a;
        ctx.beginPath();
        ctx.fillStyle = '#fff';
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;

      // fireworks
      for(let i = fireworks.length-1; i>=0; i--){
        const f = fireworks[i];
        f.vy += 0.08 * (dt/16);
        f.x += f.vx * (dt/16);
        f.y += f.vy * (dt/16);
        f.life -= (dt/16);
        ctx.globalAlpha = Math.max(0, Math.min(1, f.life/80));
        ctx.fillStyle = f.color;
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.size, 0, Math.PI*2);
        ctx.fill();
        if(f.life <= 0) fireworks.splice(i,1);
      }
      ctx.globalAlpha = 1;

      // auto fireworks occasionally (less if reduced motion)
      if(!prefersReducedMotion && t - lastFirework > 2600 + Math.random()*2200){
        lastFirework = t;
        const fx = Math.random() * window.innerWidth * 0.8 + window.innerWidth*0.1;
        const fy = Math.random() * window.innerHeight * 0.35 + 40;
        spawnFirework(fx, fy, 22 + Math.floor(Math.random()*18));
      }

      requestAnimationFrame(animateScene);
    }

    // parallax by mouse / device orientation (weak subtle effect)
    let parallax = {x:0,y:0};
    function applyParallax(){
      const heart = document.querySelector('.bg-heart');
      const lights = document.querySelector('.lights-row');
      const ornaments = document.querySelectorAll('.ornament');
      const card = document.getElementById('mainCard');

      const tx = parallax.x * 10;
      const ty = parallax.y * 6;
      if(heart) heart.style.transform = `translate(calc(-50% + ${tx*0.15}px), calc(-50% + ${ty*0.35}px)) scale(1)`;
      if(lights) lights.style.transform = `translateY(${ -8 + ty*0.05 }px) translateX(${tx*0.25}px)`;
      if(card) card.style.transform = `translate3d(${tx*0.6}px, ${ty*0.35}px, 0)`;
      ornaments.forEach((el,i)=> {
        const offsetX = (parallax.x * (6 + i%4)) * ( (i%2)? -1 : 1 );
        const offsetY = (parallax.y * (4 + i%3)) * ( (i%3)? 1 : -1 );
        el.style.transform = `translate3d(${offsetX}px, ${offsetY}px,0) scale(${el.style.transform.match(/scale\(([^)]+)\)/)?.[1] || 1})`;
      });
    }

    window.addEventListener('mousemove', (ev)=>{
      const cx = window.innerWidth/2, cy = window.innerHeight/2;
      parallax.x = (ev.clientX - cx) / cx;
      parallax.y = (ev.clientY - cy) / cy;
      applyParallax();
    });
    if(window.DeviceOrientationEvent){
      window.addEventListener('deviceorientation', (e)=>{
        const gx = e.gamma || 0;
        const by = e.beta || 0;
        parallax.x = Math.max(-1, Math.min(1, gx/30));
        parallax.y = Math.max(-1, Math.min(1, by/30));
        applyParallax();
      }, {passive:true});
    }

    // click to spawn hearts + fireworks near card
    function spawnHeartsBurst(x,y,count=20){
      const colors = ['#ff5d7a','#ff8aa3','#ffd166','#ffb1e6','#ff6f91'];
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'floating-heart';
        el.textContent = 'â¤';
        const size = 12 + Math.random()*28;
        el.style.position = 'fixed';
        el.style.left = (x + (Math.random()-0.5) * 120) + 'px';
        el.style.top = (y + (Math.random()-0.5) * 40) + 'px';
        el.style.fontSize = size + 'px';
        el.style.zIndex = 3;
        el.style.color = colors[Math.floor(Math.random()*colors.length)];
        el.style.transition = `transform 1.2s ease-out, opacity 1.2s ease-out`;
        document.body.appendChild(el);
        requestAnimationFrame(()=> {
          el.style.transform = `translateY(-220px) translateX(${(Math.random()-0.5)*80}px) scale(1.05)`;
          el.style.opacity = '0';
        });
        setTimeout(()=> el.remove(), 1250);
      }
    }

    // BACKGROUND: continuous floating hearts (spawns behind card)
    (function startBackgroundHearts(){
      if(prefersReducedMotion) return;
      const layer = document.getElementById('heartsLayer');
      if(!layer) return;
      const spawnInterval = Math.max(700, Math.min(1400, 1000)); // ms
      function spawnOne(){
        const el = document.createElement('div');
        el.className = 'floating-bg-heart';
        el.textContent = 'â¤';
        const size = 10 + Math.random()*28;
        el.style.fontSize = size + 'px';
        // spawn around center area horizontally
        const cx = window.innerWidth/2;
        const spread = Math.min(220, window.innerWidth * 0.28);
        const x = cx + (Math.random()-0.5)*spread;
        // vertical spawn near lower-middle to rise behind card
        const y = window.innerHeight * (0.58 + Math.random()*0.12);
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        el.style.color = `rgba(255,${80 + Math.floor(Math.random()*120)},${120 + Math.floor(Math.random()*60)}, ${0.95 - Math.random()*0.15})`;
        el.style.opacity = '0';
        const dur = 2200 + Math.random()*1800;
        el.style.animation = `riseHeart ${dur}ms cubic-bezier(.2,.9,.2,1) forwards`;
        layer.appendChild(el);
        // cleanup
        setTimeout(()=> el.remove(), dur + 60);
      }
      // spawn at intervals
      const id = setInterval(spawnOne, spawnInterval);
      // stop when page hidden to save perf
      document.addEventListener('visibilitychange', ()=> {
        if(document.hidden) clearInterval(id);
      }, {once:false});
      // initial burst
      for(let i=0;i<3;i++) setTimeout(spawnOne, i*200);
      // ensure resize keeps things reasonable
      window.addEventListener('resize', ()=> {});
    })();

    // toggle secret (typewriter + bursts)
    (function(){
      const btn = document.getElementById('toggleSecret');
      const secret = document.getElementById('secretArea');
      const messageEl = secret.querySelector('.message');
      const originalText = messageEl.textContent.trim();
      let typeInterval = null;

      async function typewriter(text, speed=20){
        clearInterval(typeInterval);
        messageEl.textContent = '';
        return new Promise(resolve=>{
          let i=0;
          typeInterval = setInterval(()=>{
            messageEl.textContent += text.charAt(i++);
            messageEl.parentElement.scrollTop = messageEl.parentElement.scrollHeight;
            if(i>=text.length){ clearInterval(typeInterval); typeInterval=null; resolve(); }
          }, speed);
        });
      }

      btn.addEventListener('click', async ()=>{
        const open = secret.classList.toggle('show');
        btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        btn.textContent = open ? 'SÃ¼rprizi Kapat' : 'SÃ¼rprizi AÃ§';
        const rect = document.querySelector('.card').getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2 - 20;

        if(open){
          spawnHeartsBurst(cx,cy,26);
          spawnFirework(cx - 120, cy - 40, 18);
          spawnFirework(cx + 80, cy - 60, 18);
          await typewriter(originalText, prefersReducedMotion ? 34 : 18);
          secret.setAttribute('tabindex','-1');
          secret.focus({preventScroll:true});
        } else {
          if(typeInterval) { clearInterval(typeInterval); typeInterval=null; }
          messageEl.textContent = originalText;
        }
      });
    })();

    // wire up and start scene
    function start(){
      if(!canvas || !ctx) return;
      fitCanvas();
      initParticles();
      requestAnimationFrame(animateScene);
      // re-init on resize
      window.addEventListener('resize', ()=>{
        fitCanvas(); initParticles();
      });
      // clicking card spawns hearts/fireworks
      document.querySelector('.card')?.addEventListener('click', (e)=>{
        const rect = e.currentTarget.getBoundingClientRect();
        spawnHeartsBurst(rect.left + rect.width/2, rect.top + rect.height/2, 18);
        spawnFirework(rect.left + rect.width/2, rect.top + rect.height/2 - 40, 18);
      });

      // update year badge
      const badge = document.getElementById('yearBadge');
      if(badge) badge.textContent = new Date().getFullYear();
    }

    // init when DOM ready
    if(document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', start);
    } else start();
  </script>
</body>
</html>
